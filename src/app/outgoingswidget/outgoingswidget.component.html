<md-card>

  <md-card-content>

    <h2>Your Outgoings</h2>
    <a class='add-outgoing' md-mini-fab routerLink="." (click)="createNewOutgoing = !createNewOutgoing"><md-icon>add_circle</md-icon></a>


    <div *ngIf="createNewOutgoing">
      <md-card-header>
        <md-card-title>Add New Outgoing</md-card-title>
      </md-card-header>
      <md-card-content>

        <md-input-container class="full-width">
          <input md-input placeholder="Description" [(ngModel)]="newOutgoing.description"  />
        </md-input-container>
        <md-input-container class="full-width">
          <input md-input placeholder="Account" [(ngModel)]="newOutgoing.account" />
        </md-input-container>
        <md-input-container class="full-width">
          <input md-input placeholder="Amount" [(ngModel)]="newOutgoing.amount" type="number"  />
        </md-input-container>
        <md-input-container class="full-width">
          <input md-input placeholder="Date" [(ngModel)]="newOutgoing.date"  type="number" />
        </md-input-container>

      </md-card-content>
      <md-card-actions>
        <button md-raised-button (click)="addNewOutgoing()">Add</button>
        <button md-raised-button (click)="createNewOutgoing = !createNewOutgoing">Cancel</button>
      </md-card-actions>
    </div>

     <div *ngIf="!usersOutgoings">
      <md-progress-spinner mode="indeterminate"></md-progress-spinner>
    </div>


    <div class="outgoings-card">
          <div class="savings-card__title">Total</div>
          <span class="savings-card__value">{{totalUserOutgoings | currency:'GBP':true}}</span> 
    </div>

    <div *ngFor="let outgoing of usersOutgoings; let i = index" class="outgoings-card">

      <div class="outgoings-card__menu">
            <button md-icon-button [mdMenuTriggerFor]="outgoingsmenu"><md-icon>more_vert</md-icon></button>
            <md-menu #outgoingsmenu="mdMenu">
              <button md-menu-item (click)='deleteOutgoing(outgoing)'><md-icon>delete</md-icon><span>Delete</span></button>
            </md-menu>
          </div>


          <div class="outgoings-card__title">{{outgoing.description}}</div>
          <span class="outgoings-card__value">{{outgoing.amount | currency:'GBP':true}}</span> 
          <span>{{outgoing.date}}</span>
    </div>


  </md-card-content>
</md-card>

